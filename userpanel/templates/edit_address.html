{% extends "base_userpanel.html" %}

{% block title %}Edit Address - Walkoria{% endblock %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'manage_address' %}">Manage Addresses</a></li>
        <li class="breadcrumb-item active">Edit Address</li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<div class="content-card">
    <h2 class="page-title">Edit Address</h2>
    
    <form method="POST" novalidate>
        {% csrf_token %}
        
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="full_name" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="full_name" name="full_name" 
                       value="{{ address.full_name }}" required>
            </div>
            <div class="col-md-6">
                <label for="mobile_no" class="form-label">Mobile Number</label>
                <input type="tel" class="form-control" id="mobile_no" name="mobile_no" 
                       value="{{ address.mobile_no }}" required pattern="[6-9]\d{9}">
            </div>
        </div>
        
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="pin_code" class="form-label">PIN Code</label>
                <input type="text" class="form-control" id="pin_code" name="pin_code" 
                       value="{{ address.pin_code }}" required pattern="\d{6}">
            </div>
            <div class="col-md-6">
                <label for="state" class="form-label">State</label>
                <select class="form-select" id="state" name="state" required>
                    <option value="">Select State</option>
                    {% for state_code, state_name in states %}
                        <option value="{{ state_code }}" {% if address.state == state_code %}selected{% endif %}>
                            {{ state_name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="mb-3">
            <label for="address" class="form-label">Address (House No, Building, Street, Area)</label>
            <textarea class="form-control" id="address" name="address" rows="3" required>{{ address.address }}</textarea>
        </div>
        
        <div class="mb-3">
            <label for="street" class="form-label">Street/Road Name</label>
            <input type="text" class="form-control" id="street" name="street" value="{{ address.street }}" required>
        </div>
        
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="landmark" class="form-label">Landmark (Optional)</label>
                <input type="text" class="form-control" id="landmark" name="landmark" value="{{ address.landmark|default:'' }}">
            </div>
            <div class="col-md-6">
                <label for="city" class="form-label">City/Town</label>
                <input type="text" class="form-control" id="city" name="city" value="{{ address.city }}" required>
            </div>
        </div>
        
        <div class="mb-4">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="default_address" 
                       name="default_address" {% if address.default_address %}checked{% endif %}>
                <label class="form-check-label" for="default_address">
                    Make this my default address
                </label>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary me-2">
                <i class="fas fa-save"></i> Update Address
            </button>
            <a href="{% url 'manage_address' %}" class="btn btn-secondary">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>

<style>
.form-actions {
    border-top: 1px solid #eee;
    padding-top: 20px;
    margin-top: 30px;
}

.form-check {
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.form-check-label {
    font-weight: 500;
    color: #495057;
}
</style>
{% endblock %}
